<div id="duynv_toolbar">
		<div class="flat-container">

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
  JSON
</button>
<!-- Modal -->
<div class="modal fade " id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true" data-backdrop="false" style="background-color: rgba(0, 0, 0, 0.5);	">
  <div class="modal-dialog modal-dialog-fullscreens " role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">JSON DATA</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      
  		<div class="modal-body">
			<nav>
				<div class="nav nav-tabs" id="nav-tab" role="tablist">
					<a class="nav-item nav-link active" id="nav-1" data-toggle="tab" href="#nav-tab-1" role="tab" aria-controls="nav-tab-1" aria-selected="true">JSON</a>
				    <a class="nav-item nav-link" id="nav-2" data-toggle="tab" href="#nav-tab-2" role="tab" aria-controls="nav-tab-2" aria-selected="false">Template</a>
				</div>
			</nav>
			
			<!-- tab 1 -->
			
				<div class="tab-content" id="nav-tabContent">
					<div class="tab-pane fade show active" id="nav-tab-1" role="tabpanel" aria-labelledby="nav-1">
						<div class="form-group">
			  				<label for="json-data-text">Json Data</label>	
						    <textarea class="form-control" id="json-data-text" onchange="readJSONData()" ></textarea>
			  			</div>
			  			<div class="form-group">
						<label for="txtTitle">Title</label>
						<input type="input" class="form-control" id="txtTitle">
						</div>
						<div class="form-group">
			  				<label for="summernote_desc">Description</label>	
					    	<textarea class="form-control" id="summernote_desc"  name="editordata" ></textarea>
					    	<div id="summernote_desc_temp" class="d-none"></div>
			  			</div>
			  			<div class="form-group">
			  				<label for="desc-image-url">Description Image URL</label>	
					    	<input type="input" class="form-control" id="desc-image-url">
			  			</div>

			  			<div class="form-group">
			  				<label for="suggest-list-html">Suggest Item</label>	
					    	<div id="suggest-list-html"></div>
			  			</div>
			  			
			  			<div class="form-group">
			  				<label for="json-data-text">Image</label>	
			  				<div id="lst_image">
			  				</div>
			  			</div>
						<div class="form-group">
							<label for="radNewUnUse">Status</label>
							<div class="form-check">
							  <input class="form-check-input" type="radio" name="goodsStatusRadio" id="radNewUnUse" value="new" >
							  <label class="form-check-label" for="radNewUnUse">
							    新品、未使用 (Hàng mới, chưa sử dụng)
							  </label>
							</div>
							<div class="form-check">
							  <input class="form-check-input" type="radio" name="goodsStatusRadio" id="radUnUse" value="used10" checked>
							  <label class="form-check-label" for="exampleRadios2">
							    未使用に近い (Gần như không sử dụng)
							  </label>
							</div>
						</div>
						<div class="form-group">
						<label for="lisShippingForm">Shipping template</label>
						<div id="lisShippingForm">
							
						</div>
						</div>
					
					</div>
					<div class="tab-pane fade" id="nav-tab-2" role="tabpanel" aria-labelledby="nav-2">
						<div class="form-group">
			  				<label for="summernote_temp_shipping_time">Shipping Schedule Template</label>	
					   		<textarea id="summernote_temp_shipping_time" name="editordata" class="form-control" ></textarea>
			  			</div>
						<div class="form-group">
			  				<label for="summernote_temp_desc">Description Template</label>	
					   		<textarea id="summernote_temp_desc" name="editordata" class="form-control" ></textarea>
			  			</div>
			  			<div class="form-group">
			  				<label for="summernote_temp_suggest">Suggest Template</label>	
					   		<textarea id="summernote_temp_suggest" name="editordata" class="form-control" ></textarea>
			  			</div>
			  			<div class="form-group">
			  				<label for="summernote_temp_shipping">Shipping Template</label>	
					   		<textarea id="summernote_temp_shipping" name="editordata" class="form-control" ></textarea>
			  			</div>
			  			<div class="form-group">
			  				<label for="summernote_temp_payment">Payment Template</label>	
					   		<textarea id="summernote_temp_payment" name="editordata" class="form-control" ></textarea>
			  			</div>
			  			<div class="form-group">
			  				<label for="summernote_temp_note">Note Template</label>	
					   		<textarea id="summernote_temp_note" name="editordata" class="form-control" ></textarea>
			  			</div> 
					</div>
				</div>
			
			
  			
	  	</div>
		 
      
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" onclick="updateJSONData()">Update JSON Data</button>
        <button type="button" class="btn btn-primary" onclick="fetchData()">Fetch Data</button>

        
      </div>
    </div>
  </div>
</div>
</div>


<script type="text/javascript">
	var fetchJSONData = new Object();
var $ = window.jQuery;

$(document).ready(function() {
	init();
	loadSummernote();
});


function init() {
	try{
		$("#lisShippingForm").html($("#ship_name")[0].outerHTML);
	}catch(err){}
}

function updateJSONData(){
	fetchJSONData	 = $("#txtTitle").val();
	fetchJSONData.descriptionModule.descriptionHTML = $("#summernote_desc").val();
	$("#json-data-text").val(JSON.stringify(fetchJSONData));
	alert("Da xong");
}

function readJSONData(){
	try {
		fetchJSONData = JSON.parse($("#json-data-text").val());
		$("#txtTitle").val(fetchJSONData.titleModule.subject);
		//Mo ta
		if(fetchJSONData.descriptionModule.descriptionHTML == undefined || fetchJSONData.descriptionModule.descriptionHTML == ""){
			$.get(fetchJSONData.descriptionModule.descriptionUrl,function(responseHTML){
				var customResponseHTML = $("<div>"+responseHTML+"</div>");
				customResponseHTML.find("img").remove();
				var customDesc = "";

				//Thay the mo ta
				customDesc += $('#summernote_temp_desc').val().replace("#desc-body",customResponseHTML.html()).replace(".shipping-schedule",$("#summernote_temp_shipping_time").val());

				customDesc += $('#summernote_temp_shipping').val().replace(".shipping-schedule",$("#summernote_temp_shipping_time").val());
				customDesc += $('#summernote_temp_payment').val();
				customDesc += $('#summernote_temp_note').val();

				$("#summernote_desc_temp").html(customDesc);
				$("#summernote_desc").val($("#summernote_desc_temp").html());	
			});

		}else{
			$("#summernote_desc_temp").html(fetchJSONData.descriptionModule.descriptionHTML);	
			$("#summernote_desc").val($("#summernote_desc_temp").html());	
		}

		//Hien thi list anh
		setImage();

	}
	catch(err) {
	  fetchJSONData = new Object();
	}
	console.log(fetchJSONData);
}

function setImage(){
	$("#lst_image").empty();
	for (var i = 0; i < 10;i++) {
		var HTML = '<picture class="d-inline-block" style="width: 19%;margin:5px 0px" id="img_'+(i+1)+'">';
			HTML += '<input type="checkbox" id="chk_'+(i+1)+'"/><label for="chk_'+(i+1)+'">Image '+(i+1)+'</label>';
			HTML += '<label class="form-check-label" for="chk_'+(i+1)+'"><img src="'+fetchJSONData.imageModule.imagePathList[i]+'" class="rounded mw-100 d-inline-block" alt="Picture #'+(i+1)+'"></label>';
			HTML += '<input type="text" onchange="updateImage(this)" name="" class="form-control mw-100 d-inline-block" value="'+fetchJSONData.imageModule.imagePathList[i]+'"/>';
			HTML +=' </picture>';
		
		$("#lst_image").append(HTML);


	}
}

function getImage(){
		var lstImageChecked = $("#lst_image input[type='checkbox']:checked");
		for (var i = 0; i < lstImageChecked.length; i++) {
			$("#registImage"+(i+1)).attr("src",$(lstImageChecked[i]).parent().find("input[type='text']").val());
			$("#image"+(i+1)).val($(lstImageChecked[i]).parent().find("input[type='text']").val());

		}
}

function updateImage(e){
	$(e).parent().find("img").attr("src",e.value);
}


function fetchData(){

	//Tieu de
	$("#title").val($("#txtTitle").val());

	//tinh trang san pham
	$("input[type='radio'][name='status']").val([$("input[name='goodsStatusRadio']:checked").val().toString()]);

	//Su dung anh mo ta
	if($("#desc-image-url").val() == ""){
		$("#summernote_desc_temp").find("#desc-image").empty().html();
	}else{
		$("#summernote_desc_temp").find("#desc-image").empty().append("<center><img src='"+$("#desc-image-url").val()+"' alt='"+$("#txtTitle").val()+"'/></center>").parents().html();
	}

	//Cap nhat tieu de
	$("#summernote_desc_temp").find("#desc-heading").empty().html("<center>"+$("#txtTitle").val()+"</center>").parents().html();

	$("#summernote_desc").val($("#summernote_desc_temp").html());

	//mo ta
	$("#easyWebEditor_description_copy_iframe").contents().find("body").html($("#summernote_desc").val());

	//anh
	getImage();

	//auction type
	$("#auctionPrice").click();

	//price
	$("#start_price").val(fetchJSONData.priceModule.maxAmount.value * 2);

	//so luong
	$("#quantity").val(1);

	//Thoi han dang
	$("#duration").val([3]);//3 ngay

	//gio ket thuc
	$("#closing_time").val([20]);//8-9h toi

	//Khong hoan tra 
	$("input[name='retpolicy'][value='no']").click();
	

	$("#min_bid_rating").attr("checked",true)
	$("#bad_rating_ratio").attr("checked",true)
	$("#bid_credit_limit").attr("checked",true)
	$("#auto_extension").attr("checked",true)
	$("#close_early").attr("checked",true)

	//So lan tu dong dang lai
	$("#num_resubmit").val([3]);
	//giam gia khi dang lai
	$("#change_price_ratio_resubmit").val([0]);//khong giam gia

	$("#ship_name").val($("#lisShippingForm>#ship_name").val());
	$("#ship_name").change();
}  

function loadSummernote(){
	try{
		$('#summernote_temp_shipping_time').val('<span style="COLOR: #FF0000;">入金を確認してから １５～３０日で発送。</span>');
		$('#summernote_temp_desc').val('<table width="100%" cellspacing="0" cellpadding="10" border="0"><tbody><tr><th><h6><div id="desc-heading"></div></h6></th></tr><tr><td bgcolor="#60992e"><strong> <span style="COLOR: #FFFFFF;">出品物</span> </strong></td></tr><tr><td><div id="note" class="shipping-schedule">.shipping-schedule</div></td></tr><tr><td><div><div id="desc-image"><center>&nbsp;</center></div></div><div id="desc-body">#desc-body</div></td></tr></tbody></table>');
		$('#summernote_temp_desc').val('<table width="100%" cellspacing="0" cellpadding="10" border="0"> <tbody> <tr> <th> <div id="suggest-heading"><h6>この商品も注目されています</h6></div> </th> </tr> <tr><td><div id="suggest-body">#suggest-body</div></td></tr> </tbody> </table>');
		$('#summernote_temp_shipping').val('<table width="100%" cellspacing="0" cellpadding="10" border="0"><tbody><tr><td bgcolor="#75a749"><strong><span style="COLOR: RGB(255,255,255);">発送</span></strong></td></tr><tr><td><p id="note" class="shipping-schedule">.shipping-schedule</p><p><font face="Helvetica" color="#333333">※同梱を希望される場合</font></p><p><span style="COLOR: RGB(51,51,51);"><font face="Helvetica">同梱は可能ですが、送料は１点ずつの記載送料のお支払いをお願い致します。</font></span></p><p><span style="COLOR: RGB(51,51,51);">例：２点落札の場合&nbsp;</span><span style="COLOR: RGB(51,51,51);">&nbsp;</span></p><p><font face="Helvetica"><font color="#333333">１点目　</font><span style="COLOR: RGB(51,51,51);">落札金額＋送料　＝　A</span></font></p><p><font face="Helvetica" color="#333333">２点目　落札金額＋送料　＝　B</font></p><p><font face="Helvetica"><span style="COLOR: RGB(51,51,51);">&nbsp;</span><span style="COLOR: RGB(51,51,51);">&nbsp;A＋B　＝　お支払い金額</span></font></p><p><font face="Helvetica"><span style="COLOR: RGB(51,51,51);">※送料のご相談や交渉は、受け付けていませんのでご了承ください。&nbsp;</span><span style="COLOR: RGB(51,51,51);">&nbsp;</span></font></p></td></tr></tbody></table>');
		$('#summernote_temp_payment').val('<table width="100%" cellspacing="0" cellpadding="10" border="0"><tbody><tr><td bgcolor="#75a749"><strong><span style="COLOR: RGB(255,255,255);">支払方法</span></strong><br></td></tr><tr><td><ol><li>●　Yahoo!かんたん</li><li><span>●　</span>Yahoo!マネー/預金払い</li><li><span>●　</span>クレジットカード</li><li><span>●　</span>インターネットバンキング</li><li><span>●　</span>コンビニ支払い</li></ol><p><span style="COLOR: RGB(255,0,0);">　※直接の銀行振込は受け付けておりません。落札後はすべて、かんたん決済（銀行振込は不可、銀行振込以外の支払い方法を選択してください。）にてお支払いをお願いします。</span></p></td></tr></tbody></table>');
		$('#summernote_temp_note').val('<table width="100%" cellspacing="0" cellpadding="10" border="0"><tbody><tr><td bgcolor="#75a749"><strong> <span style="COLOR: #FFFFFF;">備考</span> </strong></td></tr><tr><td><div><font size="3"><br></font></div><ol><li><font size="3">●　ご入金は落札後の3日以内にお願い致します。</font></li><li><font size="3">●　振込手数料は落札者様がご負担ください。</font></li><li><font size="3">●　落札後の返品、交換はお受けできません。</font></li><li><font size="3">●　故意による破損の返品、交換もお受けできません。</font></li><li><font size="3">●　商品を受け取る前に商品が紛失、受領されていない場合（40日以内にご連絡ください。ご連絡を受けた日から１週間以内にご返金致します</font>。）</li><li><font size="3">●　故意によるものではない破損の場合（3日以内にご連絡くだささい。ご返金または交換致します。）</font></li><li><font size="3">●　お使いのモニターによっては、実物との色合いが異なる場合がございます。ご了承ください。</font></li></ol></td></tr></tbody></table>');


		// $("#summernote_desc").summernote();

	}catch(err){console.log(err);}
 
}
</script>
</div>
